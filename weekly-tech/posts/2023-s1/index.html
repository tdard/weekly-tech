<!doctype html><html lang=fr-fr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Altair-viz 1: Introduction and base charts | Weekly tech</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="But, tell me what is Altair? ðŸ¤”"><meta name=generator content="Hugo 0.110.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=../../weekly-tech/ananke/css/main.min.css><meta property="og:title" content="Altair-viz 1: Introduction and base charts"><meta property="og:description" content="But, tell me what is Altair? ðŸ¤”"><meta property="og:type" content="article"><meta property="og:url" content="https://tdard.github.io/weekly-tech/posts/2023-s1/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-04T09:23:28+01:00"><meta property="article:modified_time" content="2023-01-04T09:23:28+01:00"><meta itemprop=name content="Altair-viz 1: Introduction and base charts"><meta itemprop=description content="But, tell me what is Altair? ðŸ¤”"><meta itemprop=datePublished content="2023-01-04T09:23:28+01:00"><meta itemprop=dateModified content="2023-01-04T09:23:28+01:00"><meta itemprop=wordCount content="368"><meta itemprop=keywords content="data-visualization,altair-viz,python,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Altair-viz 1: Introduction and base charts"><meta name=twitter:description content="But, tell me what is Altair? ðŸ¤”"><script src=https://cdn.jsdelivr.net/npm/vega@5></script>
<script src=https://cdn.jsdelivr.net/npm/vega-lite@5></script>
<script src=https://cdn.jsdelivr.net/npm/vega-embed@6></script>
<link rel=stylesheet href=../../weekly-tech/main.min.1d051a46541c6b5bf5b3752a3f2df662a1b7cecc8f94604f44c5fd0a21f62886.css></head><body class="ma0 avenir bg-near-white"><header class="cover bg-top" style=background-image:url(https://tdard.github.io/weekly-tech/images/altair_viz.png)><div class=bg-black-60><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=../../weekly-tech/ class="f3 fw2 hover-white no-underline white-90 dib">Weekly tech</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav><div class="tc-l pv6 ph3 ph4-ns"><div class="f2 f1-l fw2 white-90 mb0 lh-title">Altair-viz 1: Introduction and base charts</div></div></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">ARTICLES</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Altair-viz 1: Introduction and base charts</h1><time class="f6 mv4 dib tracked" datetime=2023-01-04T09:23:28+01:00>January 4, 2023</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l"><div class="book-columns flex flex-wrap"><div class="flex-even markdown-inner"><h2 id=but-tell-me-what-is-altair->But, tell me what is Altair? ðŸ¤”</h2><p><a href=https://altair-viz.github.io/>Altair</a> is a python library for data viz, built upon <a href=https://vega.github.io/>Vega</a> and <a href=https://vega.github.io/vega-lite/>Vega-lite</a></div><div class="flex-even markdown-inner"><img src=../../images/2023_S1_1.png alt=heatmap></div><div class="flex-even markdown-inner"><img src=../../images/2023_S1_5.png alt=bars>
<img src=../../images/2023_S1_3.png alt=areas></div></div><h2 id=why-should-you-care>Why should you care</h2><ul><li>You need to create good looking or complex charts without too much boilerplate</li><li>You donâ€™t need to draw graphs</li><li>You want easy to setup and advanced interaction</li><li>Great integration in streamlit and jupyter</li></ul><h2 id=i-have-seaborn-why-should-i-choose-altair>I have seaborn, why should I choose Altair?</h2><ul><li>Altair is slightly more beautiful for the same amount of code (IMHO)</li><li>Layout management is easier in Altair</li><li>You need to transform or filter data for the chart</li><li>You want conditional rendering (color extreme values, etc)</li></ul><h2 id=i-am-not-convinced-show-me-what-you-got>I am not convinced, show me what you got</h2><p>OK fine, I know that you are a busy person so if I do not show you some beautiful stuff right now, you might leave before the end of the article.</p><p>Here we are:</p><div id=veg></div><script type=text/javascript>fetch("https://tdard.github.io/weekly-tech/posts/2023-s1/visualization.vg.json").then(e=>e.json()).then(e=>render(e)).catch(e=>console.error(e));function render(e){vegaEmbed("#veg",e,{mode:"vega-lite"}).then(console.log).catch(console.warn)}</script><h2 id=base-charts>Base charts</h2><h3 id=preliminaries>Preliminaries</h3><p>Start by importing <strong>pandas</strong> and <strong>altair</strong>, build a dummy dataframe and
instantiate a <code>Chart</code> object.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> altair <span style=color:#66d9ef>as</span> alt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>DataFrame({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;x&#34;</span>: [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>], 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;y&#34;</span>: [<span style=color:#ae81ff>15</span>, <span style=color:#ae81ff>16</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>30</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;z&#34;</span>: [<span style=color:#ae81ff>0.1</span>, <span style=color:#ae81ff>0.4</span>, <span style=color:#ae81ff>0.6</span>, <span style=color:#ae81ff>0.2</span>, <span style=color:#ae81ff>0.15</span>, <span style=color:#ae81ff>0.8</span>], 
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;names&#34;</span>: [<span style=color:#e6db74>&#34;Pierre&#34;</span>, <span style=color:#e6db74>&#34;Paul&#34;</span>, <span style=color:#e6db74>&#34;Jacques&#34;</span>, <span style=color:#e6db74>&#34;Pierre&#34;</span>, <span style=color:#e6db74>&#34;Paul&#34;</span>, <span style=color:#e6db74>&#34;Jacques&#34;</span>]
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chart <span style=color:#f92672>=</span> alt<span style=color:#f92672>.</span>Chart(df)<span style=color:#f92672>.</span>encode(
</span></span><span style=display:flex><span>    x<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;x:Q&#34;</span>, 
</span></span><span style=display:flex><span>    y<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;y:Q&#34;</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><code>alt.Chart(data)</code> creates a <code>Chart</code> instance, which will use columns from <code>df</code> as core data.
By assigning <em>encodings</em> to the chart, one decides <strong>how</strong> data is displayed: which goes on the X axis, which goes on Y. There is several more encodings: color, theta, tooltip, etc. Moreover, what is the weird letter <code>Q</code> at the end of <code>x:Q</code> and <code>y:Q</code>? We&rsquo;ll cover that later.</p><p>Now, you should be willing to <em>display</em> something: dots, bars, area, grid?</p><p>For that, once you defined proper encodings, you can tell altair <em>what</em> to draw:</p><div class="book-columns flex flex-wrap"><div class="flex-even markdown-inner"><h4 id=scatter-chart>Scatter chart</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>chart<span style=color:#f92672>.</span>mark_point()
</span></span></code></pre></div><p><img src=../../images/mark_point.png alt=mark_point></p></div><div class="flex-even markdown-inner"><h4 id=bar-chart>Bar chart</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>chart<span style=color:#f92672>.</span>mark_bar()
</span></span></code></pre></div><p><img src=../../images/mark_bar.png alt=mark_bar></p></div><div class="flex-even markdown-inner"><h4 id=line-chart>Line chart</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>chart<span style=color:#f92672>.</span>mark_line()
</span></span></code></pre></div><p><img src=../../images/mark_line.png alt=mark_line></p></div></div><h2 id=recap>Recap</h2><ul><li>Altair is a framework of data visualization in python.</li><li>It uses pandas DataFrame as data sources, and displaying charts are done in a triple step fashion:<ul><li>Create the chart object <code>chart = alt.Chart(df)</code></li><li>Tell altair what columns should be used, and how by specifying encodings: <code>chart_encoded = chart.encode(x=&lt;column A>, y=&lt;column B>)</code></li><li>Tell altair what to draw by specifying a <strong>mark</strong>: <code>chart_encoded.mark_*()</code></li></ul></li></ul><ul class=pa0><li class="list di"><a href=../../weekly-tech/tags/data-visualization/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">data-visualization</a></li><li class="list di"><a href=../../weekly-tech/tags/altair-viz/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">altair-viz</a></li><li class="list di"><a href=../../weekly-tech/tags/python/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">python</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://tdard.github.io/weekly-tech/>&copy; Weekly tech 2023</a><div><div class=ananke-socials></div></div></div></footer></body></html>